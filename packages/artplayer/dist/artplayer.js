/*!
 * artplayer.js v3.1.18
 * Github: https://github.com/zhw2590582/ArtPlayer#readme
 * (c) 2017-2019 Harvey Zack
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Artplayer=e()}(this,function(){"use strict";var a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t};function t(t,e){return t(e={exports:{}},e.exports),e.exports}var c=t(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(t){return n(t)}:e.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(t)}e.exports=r});var o=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var s=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?o(t):e},u=t(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),l=t(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r});var e=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)},f=t(function(t,e){t.exports=function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=Object.prototype.toString,s=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var e=n(t);if("boolean"===e)return"boolean";if("string"===e)return"string";if("number"===e)return"number";if("symbol"===e)return"symbol";if("function"===e)return function(t){return"GeneratorFunction"===i(t)}(t)?"generatorfunction":"function";if(function(t){return Array.isArray?Array.isArray(t):t instanceof Array}(t))return"array";if(function(t){if(t.constructor&&"function"==typeof t.constructor.isBuffer)return t.constructor.isBuffer(t);return!1}(t))return"buffer";if(function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}(t))return"arguments";if(function(t){return t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate}(t))return"date";if(function(t){return t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit}(t))return"error";if(function(t){return t instanceof RegExp||"string"==typeof t.flags&&"boolean"==typeof t.ignoreCase&&"boolean"==typeof t.multiline&&"boolean"==typeof t.global}(t))return"regexp";switch(i(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(t){return"function"==typeof t.throw&&"function"==typeof t.return&&"function"==typeof t.next}(t))return"generator";switch(e=r.call(t)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return e.slice(8,-1).toLowerCase().replace(/\s/g,"")};function i(t){return t.constructor?t.constructor.name:null}function u(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["option"];return l(t,e,n),f(t,e,n),function(o,a,c){var t=s(a),e=s(o);if("object"===t){if("object"!==e)throw new Error("[Type Error]: '".concat(c.join("."),"' require 'object' type, but got '").concat(e,"'"));Object.keys(a).forEach(function(t){var e=o[t],n=a[t],r=c.slice();r.push(t),l(e,n,r),f(e,n,r),u(e,n,r)})}if("array"===t){if("array"!==e)throw new Error("[Type Error]: '".concat(c.join("."),"' require 'array' type, but got '").concat(e,"'"));o.forEach(function(t,e){var n=o[e],r=a[e]||a[0],i=c.slice();i.push(e),l(n,r,i),f(n,r,i),u(n,r,i)})}}(t,e,n),t}function l(t,e,n){if("string"===s(e)){var r=s(t);if(!(-1<e.indexOf("|")?e.split("|").map(function(t){return t.toLowerCase().trim()}).filter(Boolean).some(function(t){return r===t}):e.toLowerCase().trim()===r))throw new Error("[Type Error]: '".concat(n.join("."),"' require '").concat(e,"' type, but got '").concat(r,"'"))}}function f(t,e,n){if("function"===s(e)){var r=e(t,s(t),n);if(!0!==r){var i=s(r);throw"string"===i?new Error(r):"error"===i?r:new Error("[Validator Error]: The scheme for '".concat(n.join("."),"' validator require return true, but got '").concat(r,"'"))}}}return u.kindOf=s,u}()}),p=function(){function t(){a(this,t)}return i(t,[{key:"on",value:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this}},{key:"once",value:function(r,i,o){var a=this;function c(){a.off(r,c);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.apply(o,e)}return c._=i,this.on(r,c,o)}},{key:"emit",value:function(t){for(var e=((this.e||(this.e={}))[t]||[]).slice(),n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<e.length;o+=1)e[o].fn.apply(e[o].ctx,r);return this}},{key:"off",value:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o+=1)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}}]),t}();function d(t){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:document).querySelector(t)}function h(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return Array.from(e.querySelectorAll(t))}function m(t,e){return t.classList.add(e)}function g(t,e){return t.classList.remove(e)}function b(t,e){return t.classList.contains(e)}function w(t,e){return e instanceof Element?t.appendChild(e):t.insertAdjacentHTML("beforeend",String(e)),t.lastElementChild||t.lastChild}function y(t){return t.parentNode.removeChild(t)}function O(t,e,n){return t.style[e]=n,t}function v(e,n){return Object.keys(n).forEach(function(t){O(e,t,n[t])}),e}function j(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=window.getComputedStyle(t,null).getPropertyValue(e);return n?parseFloat(r):r}function n(e){return Array.from(e.parentElement.children).filter(function(t){return t!==e})}function P(t,e){n(t).forEach(function(t){return g(t,e)}),m(t,e)}function k(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"up";t.setAttribute("aria-label",e),t.setAttribute("data-balloon-pos",n)}var x=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},E=t(function(r){function i(t,e,n){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?r.exports=i=function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}:r.exports=i=Reflect.construct,i.apply(null,arguments)}r.exports=i}),S=function(t){function r(t,e){var n;return a(this,r),n=s(this,u(r).call(this,t)),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o(n),e||n.constructor),n.name="ArtPlayerError",n}return e(r,t),r}(t(function(e){function r(t){var n="function"==typeof Map?new Map:void 0;return e.exports=r=function(t){if(null===t||!x(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return E(t,arguments,u(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),l(e,t)},r(t)}e.exports=r})(Error));function $(t,e){if(!t)throw new S(e);return t}function R(t){return"WEBVTT \r\n\r\n".concat(t.replace(/{[\s\S]*?}/g,"").replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat("\r\n\r\n"))}function T(t){return URL.createObjectURL(new Blob([t],{type:"text/vtt"}))}function D(t){var n=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function r(t){return(0<arguments.length&&void 0!==t?t:"").split(/[:.]/).map(function(t,e,n){if(e===n.length-1){if(1===t.length)return".".concat(t,"00");if(2===t.length)return".".concat(t,"0")}else if(1===t.length)return(0===e?"0":":0")+t;return 0===e?t:e===n.length-1?".".concat(t):":".concat(t)}).join("")}return"WEBVTT\n\n".concat(t.split(/\r?\n/).map(function(t){var e=t.match(n);return e?{start:r(e[1].trim()),end:r(e[2].trim()),text:e[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map(function(t){return t.trim()}).join("\n")}:null}).filter(function(t){return t}).map(function(t,e){return t?"".concat(e+1,"\n").concat(t.start," --\x3e ").concat(t.end,"\n").concat(t.text):""}).filter(function(t){return t.trim()}).join("\n\n"))}function C(t){return t.includes("?")?C(t.split("?")[0]):t.includes("#")?C(t.split("#")[0]):t.trim().toLowerCase().split(".").pop()}function A(t,e){var n=document.createElement("a");n.style.display="none",n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}var L=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}};var M=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)};var z=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var q=function(t){return L(t)||M(t)||z()};function W(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function F(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce(function(e,n){return Object.getOwnPropertyNames(n).forEach(function(t){$(!W(e,t),"Target attribute name is duplicated: ".concat(t)),Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e},t)}function H(){for(var o=function(t){return t&&"object"===c(t)&&!Array.isArray(t)},t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(r,i){return Object.keys(i).forEach(function(t){var e=r[t],n=i[t];Array.isArray(e)&&Array.isArray(n)?r[t]=e.concat.apply(e,q(n)):!o(e)||!o(n)||n instanceof Element?r[t]=n:r[t]=H(e,n)}),r},{})}function I(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){return setTimeout(t,e)})}function V(r,i,o){var a;function t(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];clearTimeout(a),a=setTimeout(function(){a=null,r.apply(o,e)},i)}return t.clearTimeout=function(){clearTimeout(a)},t}function B(i,o){var a,c,s=!1;return function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(s)return a=n,void(c=this);s=!0,i.apply(this,n),setTimeout(function(){s=!1,a&&(t.apply(c,a),c=a=null)},o)}}function N(t,e,n){return Math.max(Math.min(t,Math.max(e,n)),Math.min(e,n))}function U(t){var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),r=Math.floor(t-3600*e-60*n);return(0<e?[e,n,r]:[n,r]).map(function(t){return t<10?"0".concat(t):String(t)}).join(":")}var _=Object.freeze({__proto__:null,query:d,queryAll:h,addClass:m,removeClass:g,hasClass:b,append:w,remove:y,setStyle:O,setStyles:v,getStyle:j,sublings:n,inverseClass:P,tooltip:k,ArtPlayerError:S,errorHandle:$,srtToVtt:R,vttToBlob:T,assToVtt:D,getExt:C,downloadFile:A,hasOwnProperty:W,proxyPropertys:F,mergeDeep:H,sleep:I,debounce:V,throttle:B,clamp:N,secondToTime:U});function X(t,e,n){return $("string"===e||t instanceof Element,"".concat(n.join(".")," require 'string' or 'Element' type"))}function Y(t){var e=this;a(this,Y);var n=t.constructor.kindOf,r=t.option.whitelist;this.userAgent=window.navigator.userAgent,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(this.userAgent),this.state=!this.isMobile||r.some(function(t){switch(n(t)){case"string":return-1<e.userAgent.indexOf(t);case"function":return t(e.userAgent);case"regexp":return t.test(e.userAgent);default:return!1}})}var Z={container:X,url:"string|function",poster:"string",title:"string",theme:"string",lang:"string",volume:"number",isLive:"boolean",muted:"boolean",autoplay:"boolean",autoSize:"boolean",loop:"boolean",flip:"boolean",playbackRate:"boolean",aspectRatio:"boolean",screenshot:"boolean",setting:"boolean",hotkey:"boolean",pip:"boolean",mutex:"boolean",fullscreen:"boolean",fullscreenWeb:"boolean",subtitleOffset:"boolean",miniProgressBar:"boolean",localVideo:"boolean",localSubtitle:"boolean",autoPip:"boolean",networkMonitor:"boolean",plugins:["function"],whitelist:["string|function|regexp"],layers:[{disable:"boolean|undefined",name:"string|undefined",index:"number|undefined",html:X,style:"object|undefined",click:"function|undefined",mounted:"function|undefined",tooltip:"string|undefined"}],contextmenu:[{disable:"boolean|undefined",name:"string|undefined",index:"number|undefined",html:X,style:"object|undefined",click:"function|undefined",mounted:"function|undefined",tooltip:"string|undefined"}],quality:[{default:"boolean|undefined",name:"string",url:"string"}],controls:[{disable:"boolean|undefined",name:"string|undefined",index:"number|undefined",html:X,style:"object|undefined",click:"function|undefined",mounted:"function|undefined",tooltip:"string|undefined",position:function(t,e,n){var r=["top","left","right"];return $(r.includes(t),"".concat(n.join(".")," only accept ").concat(r.toString()," as parameters"))}}],highlight:[{time:"number",text:"string"}],thumbnails:{url:"string",number:"number",width:"number",height:"number",column:"number"},subtitle:{url:"string",style:"object"},moreVideoAttr:"object",icons:"object",customType:"object"},J={video:{propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"]}},G=function(){function n(t){var e=this;a(this,n),(this.art=t).option.container instanceof Element?this.$container=t.option.container:(this.$container=d(t.option.container),$(this.$container,"No container element found by ".concat(t.option.container))),$(t.constructor.instances.every(function(t){return t.template.$container!==e.$container}),"Cannot mount multiple instances on the same dom element"),$(this.$container.clientWidth&&this.$container.clientHeight,"The width and height of the container cannot be 0"),t.whitelist.state?this.initDesktop():this.initMobile()}return i(n,[{key:"query",value:function(t){return d(t,this.$container)}},{key:"initDesktop",value:function(){this.$container.innerHTML='\n          <div class="artplayer-video-player" style="--theme: '.concat(this.art.option.theme,'">\n            <video class="artplayer-video"></video>\n            <div class="artplayer-subtitle"></div>\n            <div class="artplayer-danmuku"></div>\n            <div class="artplayer-layers"></div>\n            <div class="artplayer-mask"></div>\n            <div class="artplayer-bottom">\n              <div class="artplayer-progress"></div>\n              <div class="artplayer-controls">\n                <div class="artplayer-controls-left"></div>\n                <div class="artplayer-controls-right"></div>\n              </div>\n            </div>\n            <div class="artplayer-loading"></div>\n            <div class="artplayer-notice">\n              <div class="artplayer-notice-inner"></div>\n            </div>\n            <div class="artplayer-setting">\n              <div class="artplayer-setting-inner artplayer-backdrop-filter">\n                <div class="artplayer-setting-body"></div>\n              </div>\n            </div>\n            <div class="artplayer-info artplayer-backdrop-filter">\n              <div class="artplayer-info-panel"></div>\n              <div class="artplayer-info-close">[x]</div>\n            </div>\n            <div class="artplayer-pip-header">\n              <div class="artplayer-pip-title"></div>\n              <div class="artplayer-pip-close">×</div>\n            </div>\n            <div class="artplayer-contextmenu artplayer-backdrop-filter"></div>\n          </div>\n        '),this.$player=this.query(".artplayer-video-player"),this.$video=this.query(".artplayer-video"),this.$subtitle=this.query(".artplayer-subtitle"),this.$danmuku=this.query(".artplayer-danmuku"),this.$bottom=this.query(".artplayer-bottom"),this.$progress=this.query(".artplayer-progress"),this.$controls=this.query(".artplayer-controls"),this.$controlsLeft=this.query(".artplayer-controls-left"),this.$controlsRight=this.query(".artplayer-controls-right"),this.$layers=this.query(".artplayer-layers"),this.$loading=this.query(".artplayer-loading"),this.$notice=this.query(".artplayer-notice"),this.$noticeInner=this.query(".artplayer-notice-inner"),this.$mask=this.query(".artplayer-mask"),this.$setting=this.query(".artplayer-setting"),this.$settingInner=this.query(".artplayer-setting-inner"),this.$settingBody=this.query(".artplayer-setting-body"),this.$info=this.query(".artplayer-info"),this.$infoPanel=this.query(".artplayer-info-panel"),this.$infoClose=this.query(".artplayer-info-close"),this.$pipHeader=this.query(".artplayer-pip-header"),this.$pipTitle=this.query(".artplayer-pip-title"),this.$pipClose=this.query(".artplayer-pip-close"),this.$contextmenu=this.query(".artplayer-contextmenu")}},{key:"initMobile",value:function(){this.$container.innerHTML='\n          <div class="artplayer-video-player">\n            <video class="artplayer-video"></video>\n          </div>\n        ',this.$player=this.query(".artplayer-video-player"),this.$video=this.query(".artplayer-video")}},{key:"destroy",value:function(t){t?this.$container.innerHTML="":m(this.$player,"artplayer-destroy")}}]),n}(),Q={"About author":"关于作者","Video info":"视频统计信息",Close:"关闭","Video load failed":"视频加载失败",Volume:"音量",Play:"播放",Pause:"暂停",Rate:"速度",Mute:"静音",Flip:"视频翻转",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新连接","Hide subtitle":"隐藏字幕","Show subtitle":"显示字幕","Hide danmu":"隐藏弹幕","Show danmu":"显示弹幕","Show setting":"显示设置","Hide setting":"隐藏设置",Screenshot:"截图","Play speed":"播放速度","Aspect ratio":"画面比例",Default:"默认",Normal:"正常","Switch video":"切换","Switch subtitle":"切换字幕",Fullscreen:"全屏","Exit fullscreen":"退出全屏","Web fullscreen":"网页全屏","Exit web fullscreen":"退出网页全屏","Mini player":"迷你播放器","Does not support fullscreen":"不支持全屏"},K={"About author":"關於作者","Video info":"影片統計訊息",Close:"關閉","Video load failed":"影片載入失敗",Volume:"音量",Play:"播放",Pause:"暫停",Rate:"速度",Mute:"靜音",Flip:"影片翻轉",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新連接","Hide subtitle":"隱藏字幕","Show subtitle":"顯示字幕","Show setting":"顯示设置","Hide setting":"隱藏设置","Hide danmu":"隱藏彈幕","Show danmu":"顯示彈幕",Screenshot:"截圖","Play speed":"播放速度","Aspect ratio":"畫面比例",Default:"默認",Normal:"正常","Switch video":"切換","Switch subtitle":"切換字幕",Fullscreen:"全屏","Exit fullscreen":"退出全屏","Web fullscreen":"網頁全屏","Exit web fullscreen":"退出網頁全屏","Mini player":"迷你播放器","Does not support fullscreen":"不支持全屏"},tt=function(){function e(t){a(this,e),this.art=t,this.languages={"zh-cn":Q,"zh-tw":K},this.init()}return i(e,[{key:"init",value:function(){var t=this.art.option.lang.toLowerCase();this.language=this.languages[t]||{}}},{key:"get",value:function(t){return this.language[t]||t}},{key:"update",value:function(t){this.languages=H(this.languages,t),this.init()}}]),e}();var et=t(function(t){var o,e,i,r,n;o="undefined"!=typeof window&&void 0!==window.document?window.document:{},e=t.exports,i=function(){for(var t,e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=e.length,i={};n<r;n++)if((t=e[n])&&t[1]in o){for(n=0;n<t.length;n++)i[e[0][n]]=t[n];return i}return!1}(),r={change:i.fullscreenchange,error:i.fullscreenerror},n={request:function(r){return new Promise(function(t,e){var n=function(){this.off("change",n),t()}.bind(this);this.on("change",n),r=r||o.documentElement,Promise.resolve(r[i.requestFullscreen]()).catch(e)}.bind(this))},exit:function(){return new Promise(function(t,e){if(this.isFullscreen){var n=function(){this.off("change",n),t()}.bind(this);this.on("change",n),Promise.resolve(o[i.exitFullscreen]()).catch(e)}else t()}.bind(this))},toggle:function(t){return this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,e){var n=r[t];n&&o.addEventListener(n,e,!1)},off:function(t,e){var n=r[t];n&&o.removeEventListener(n,e,!1)},raw:i},i?(Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(o[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return o[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(o[i.fullscreenEnabled])}}}),e?t.exports=n:window.screenfull=n):e?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}});et.isEnabled;function nt(t,e){var n=t.template.$video;document.pictureInPictureEnabled?function(t,e){var n=t.template.$video,r=t.events.proxy,i=t.notice;n.disablePictureInPicture=!1,Object.defineProperty(e,"pip",{get:function(){return document.pictureInPictureElement},set:function(t){t?n.requestPictureInPicture().catch(function(t){throw i.show(t),t}):document.exitPictureInPicture().catch(function(t){throw i.show(t),t})}}),r(n,"enterpictureinpicture",function(){t.emit("pipEnabled")}),r(n,"leavepictureinpicture",function(){t.emit("pipExit")}),t.on("destroy",function(){e.pip&&(e.pip=!1)})}(t,e):n.webkitSupportsPresentationMode?function(e,t){var n=e.template.$video;n.webkitSetPresentationMode("inline"),Object.defineProperty(t,"pip",{get:function(){return"picture-in-picture"===n.webkitPresentationMode},set:function(t){t?(n.webkitSetPresentationMode("picture-in-picture"),e.emit("pipEnabled")):(n.webkitSetPresentationMode("inline"),e.emit("pipExit"))}})}(t,e):function(n,r){var t=n.option,e=n.i18n,i=n.template,o=i.$player,a=i.$pipClose,c=i.$pipTitle,s=i.$pipHeader,u=n.events.proxy,l="",f=!1,p=0,d=0,h=0,y=0;u(s,"mousedown",function(t){f=!0,p=t.pageX,d=t.pageY,h=r.left,y=r.top}),u(s,"mousemove",function(t){f&&(m(o,"is-dragging"),O(o,"left","".concat(h+t.pageX-p,"px")),O(o,"top","".concat(y+t.pageY-d,"px")))}),u(document,"mouseup",function(){f=!1,g(o,"is-dragging")}),u(a,"click",function(){r.pip=!1,f=!1,g(o,"is-dragging")}),w(c,t.title||e.get("Mini player"));var v={get:function(){return b(o,"artplayer-pip")},set:function(t){if(t){r.autoSize=!1,l=o.style.cssText,m(o,"artplayer-pip");var e=document.body;O(o,"top","".concat(e.clientHeight-r.height-50,"px")),O(o,"left","".concat(e.clientWidth-r.width-50,"px")),r.fullscreen=!1,r.fullscreenWeb=!1,r.aspectRatio=!1,r.playbackRate=!1,n.emit("pipEnabled")}else r.pip&&(o.style.cssText=l,g(o,"artplayer-pip"),O(o,"top",null),O(o,"left",null),r.fullscreen=!1,r.fullscreenWeb=!1,r.aspectRatio=!1,r.playbackRate=!1,r.autoSize=!0,n.emit("pipExit"))}};Object.defineProperty(r,"pip",v)}(t,e),Object.defineProperty(e,"pipToggle",{set:function(t){t&&(e.pip=!e.pip)}})}function rt(t){a(this,rt),function(r,t){var e=r.option,i=e.type,o=e.customType,a=r.template.$video;Object.defineProperty(t,"url",{get:function(){return a.src},set:function(){$(!1,"You should use this method: art.attachUrl()")}}),Object.defineProperty(t,"attachUrl",{value:function(n){return I().then(function(){function e(t){var e=i||C(t),n=o[e];return e&&n?(r.loading.show=!0,r.emit("beforeCustomType",e),n.call(r,a,t,r),r.emit("afterCustomType",e)):(r.emit("beforeAttachUrl",t),a.src=t,r.emit("afterAttachUrl",t)),Promise.resolve(t)}if("function"!=typeof n)return e(n);var t=n.call(r);return $("function"==typeof t.then,"If url is a function, it needs to return a promise."),t.then(function(t){return r.loading.show=!0,e(t)})})}})}(t,this),function(e,t){var n=e.option,r=e.events.proxy,i=e.template,o=i.$player,a=i.$video,c=e.i18n,s=e.notice,u=0;r(a,"click",function(){t.toggle=!0}),J.video.events.forEach(function(t){r(a,t,function(t){e.emit("video:".concat(t.type),t)})}),e.on("video:canplay",function(){u=0,e.controls.show=!0,e.mask.show=!0,e.loading.show=!1}),e.once("video:canplay",function(){e.emit("ready")}),e.on("video:ended",function(){e.controls.show=!0,e.mask.show=!0,n.loop&&(t.seek=0,t.play=!0)}),e.on("video:error",function(){u<5?I(1e3).then(function(){u+=1,t.attachUrl(n.url),s.show("".concat(c.get("Reconnect"),": ").concat(u))}):(e.loading.show=!1,e.controls.show=!1,m(o,"artplayer-error"),I(1e3).then(function(){s.show(c.get("Video load failed"),!1),e.destroy()}))}),e.on("video:loadedmetadata",function(){n.autoSize&&(t.autoSize=!0)}),e.on("video:loadstart",function(){e.loading.show=!0}),e.on("video:pause",function(){e.controls.show=!0,e.mask.show=!0}),e.on("video:play",function(){e.mask.show=!1}),e.on("video:playing",function(){e.mask.show=!1}),e.on("video:seeked",function(){e.loading.show=!1}),e.on("video:seeking",function(){e.loading.show=!0}),e.on("video:timeupdate",function(){e.mask.show=!1}),e.on("video:waiting",function(){e.loading.show=!0})}(t,this),function(t,e){var n=t.option,r=t.template.$video;Object.keys(n.moreVideoAttr).forEach(function(t){r[t]=n.moreVideoAttr[t]}),n.muted&&(r.muted=n.muted),n.volume&&(r.volume=N(n.volume,0,1)),n.poster&&(r.poster=n.poster),n.autoplay&&(r.autoplay=n.autoplay),r.controls=!1,e.attachUrl(n.url)}(t,this),function(n,r){var i=n.template.$video,o=n.i18n,a=n.notice,c=n.option.mutex;Object.defineProperty(r,"play",{set:function(t){if(t){var e=i.play();void 0!==e&&e.then().catch(function(t){throw a.show(t,!0,3e3),t}),c&&n.constructor.instances.filter(function(t){return t!==n}).forEach(function(t){t.player.pause=!0}),a.show(o.get("Play")),n.emit("play")}else r.pause=!0}})}(t,this),function(e,n){var r=e.template.$video,i=e.i18n,o=e.notice;Object.defineProperty(n,"pause",{get:function(){return r.paused},set:function(t){t?(r.pause(),o.show(i.get("Pause")),e.emit("pause")):n.play=!0}})}(t,this),function(t,e){Object.defineProperty(e,"toggle",{set:function(t){t&&(e.playing?e.pause=!0:e.play=!0)}})}(0,this),function(e,n){var r=e.notice;Object.defineProperty(n,"seek",{set:function(t){n.currentTime=t,r.show("".concat(U(t)," / ").concat(U(n.duration))),e.emit("seek",t)}})}(t,this),function(e,t){var n=e.template.$video,r=e.i18n,i=e.notice,o=e.storage;Object.defineProperty(t,"volume",{get:function(){return n.volume||0},set:function(t){n.volume=N(t,0,1),i.show("".concat(r.get("Volume"),": ").concat(parseInt(100*n.volume,10))),0!==n.volume&&o.set("volume",n.volume),e.emit("volumeChange",n.volume)}}),Object.defineProperty(t,"muted",{get:function(){return n.muted},set:function(t){n.muted=t,e.emit("volumeChange",n.volume)}})}(t,this),function(e,n){Object.defineProperty(n,"currentTime",{get:function(){return e.template.$video.currentTime||0},set:function(t){e.template.$video.currentTime=N(t,0,n.duration)}})}(t,this),function(t,e){Object.defineProperty(e,"duration",{get:function(){return t.template.$video.duration||0}})}(t,this),function(o,a){var c=o.i18n,s=o.notice,u=o.option,l=o.template;Object.defineProperty(a,"switchQuality",{value:function(t,e){var n=1<arguments.length&&void 0!==e?e:"unknown";if(t===l.$video.src)return null;URL.revokeObjectURL(l.$video.src);var r=a.currentTime,i=a.playing;return a.attachUrl(t).then(function(){u.url=t,a.playbackRate=!1,a.aspectRatio=!1,o.on("ready",function(){a.currentTime=r}),i&&(a.play=!0),s.show("".concat(c.get("Switch video"),": ").concat(n)),o.emit("switch",t)})}}),Object.defineProperty(a,"switchUrl",{value:function(t,e){var n=1<arguments.length&&void 0!==e?e:"unknown";if(t===l.$video.src)return null;URL.revokeObjectURL(l.$video.src);var r=a.playing;return a.attachUrl(t).then(function(){u.url=t,a.playbackRate=!1,a.aspectRatio=!1,o.on("ready",function(){a.currentTime=0}),r&&(a.play=!0),s.show("".concat(c.get("Switch video"),": ").concat(n)),o.emit("switch",t)})}})}(t,this),function(n,r){var t=n.template,i=t.$video,o=t.$player,a=n.i18n,c=n.notice;Object.defineProperty(r,"playbackRate",{get:function(){return o.dataset.playbackRate},set:function(t){if(t){var e=[.5,.75,1,1.25,1.5,1.75,2];if($(e.includes(t),"'playbackRate' only accept ".concat(e.toString()," as parameters")),t===o.dataset.playbackRate)return;i.playbackRate=t,o.dataset.playbackRate=t,c.show("".concat(a.get("Rate"),": ").concat(1===t?a.get("Normal"):"".concat(t,"x"))),n.emit("playbackRateChange",t)}else r.playbackRate&&(r.playbackRate=1,delete o.dataset.playbackRate,n.emit("playbackRateRemove"))}}),Object.defineProperty(r,"playbackRateReset",{set:function(t){if(t){var e=o.dataset.playbackRate;e&&(r.playbackRate=Number(e),n.emit("playbackRateReset"))}}})}(t,this),function(f,p){var t=f.template,d=t.$video,h=t.$player,y=f.i18n,v=f.notice;Object.defineProperty(p,"aspectRatio",{get:function(){return h.dataset.aspectRatio||""},set:function(t){if(t){var e=["default","4:3","16:9"];if($(e.includes(t),"'aspectRatio' only accept ".concat(e.toString()," as parameters")),"default"===t)p.aspectRatio=!1;else{var n=t.split(":"),r=d.videoWidth,i=d.videoHeight,o=h.clientWidth,a=h.clientHeight,c=r/i,s=n[0]/n[1];if(s<c){var u=s*i/r;O(d,"width","".concat(100*u,"%")),O(d,"height","100%"),O(d,"padding","0 ".concat((o-o*u)/2,"px"))}else{var l=r/s/i;O(d,"width","100%"),O(d,"height","".concat(100*l,"%")),O(d,"padding","".concat((a-a*l)/2,"px 0"))}}h.dataset.aspectRatio=t,v.show("".concat(y.get("Aspect ratio"),": ").concat("default"===t?y.get("Default"):t)),f.emit("aspectRatioChange",t)}else p.aspectRatio&&(O(d,"width",null),O(d,"height",null),O(d,"padding",null),delete h.dataset.aspectRatio,f.emit("aspectRatioRemove"))}}),Object.defineProperty(p,"aspectRatioReset",{set:function(t){if(t&&p.aspectRatio){var e=p.aspectRatio;p.aspectRatio=e,f.emit("aspectRatioReset")}}})}(t,this),function(e,n){var r=e.option,i=e.notice,o=e.template.$video;Object.defineProperty(n,"getScreenshotDataURL",{value:function(){try{var t=document.createElement("canvas");return t.width=o.videoWidth,t.height=o.videoHeight,t.getContext("2d").drawImage(o,0,0),t.toDataURL("image/png")}catch(t){throw i.show(t),t}}}),Object.defineProperty(n,"getScreenshotBlobUrl",{value:function(){return new Promise(function(e,n){try{var t=document.createElement("canvas");t.width=o.videoWidth,t.height=o.videoHeight,t.getContext("2d").drawImage(o,0,0),t.toBlob(function(t){e(URL.createObjectURL(t))})}catch(t){i.show(t),n(t)}})}}),Object.defineProperty(n,"screenshot",{value:function(){var t=n.getScreenshotDataURL();t&&(A(t,"".concat(r.title||"artplayer","_").concat(U(o.currentTime),".png")),e.emit("screenshot",t))}})}(t,this),function(e,n){function t(){e.emit("fullscreen:change",et.isFullscreen)}function r(){o.show(i.get("Does not support fullscreen"))}var i=e.i18n,o=e.notice,a=e.events.destroyEvents,c=e.template.$player;n.fullscreenIsEnabled&&(et.on("change",t),et.on("error",r),a.push(function(){et.off("change",t),et.off("error",r)})),Object.defineProperty(n,"fullscreen",{get:function(){return et.isFullscreen},set:function(t){n.fullscreenIsEnabled?t?(n.fullscreenWeb&&(n.fullscreenWeb=!1),et.request(c).then(function(){m(c,"artplayer-fullscreen"),n.aspectRatioReset=!0,e.emit("fullscreen:enabled")})):(n.fullscreenWeb&&(n.fullscreenWeb=!1),et.exit().then(function(){g(c,"artplayer-fullscreen"),n.aspectRatioReset=!0,e.emit("fullscreen:exit")})):r()}}),Object.defineProperty(n,"fullscreenToggle",{set:function(t){t&&(n.fullscreen=!n.fullscreen)}}),Object.defineProperty(n,"fullscreenIsEnabled",{get:function(){return et.isEnabled}})}(t,this),function(e,n){var r=e.template.$player;Object.defineProperty(n,"fullscreenWeb",{get:function(){return b(r,"artplayer-web-fullscreen")},set:function(t){t?(n.fullscreen&&(n.fullscreen=!1),m(r,"artplayer-web-fullscreen"),n.aspectRatioReset=!0,e.emit("fullscreenWeb:enabled")):(n.fullscreen&&(n.fullscreen=!1),g(r,"artplayer-web-fullscreen"),n.aspectRatioReset=!0,e.emit("fullscreenWeb:exit"))}}),Object.defineProperty(n,"fullscreenWebToggle",{set:function(t){t&&(n.fullscreenWeb=!n.fullscreenWeb)}})}(t,this),nt(t,this),function(t,e){var n=t.template.$video;Object.defineProperty(e,"loaded",{get:function(){return n.buffered.length?n.buffered.end(n.buffered.length-1)/n.duration:0}}),Object.defineProperty(e,"loadedTime",{get:function(){return n.buffered.length?n.buffered.end(n.buffered.length-1):0}})}(t,this),function(t,e){Object.defineProperty(e,"played",{get:function(){return t.template.$video.currentTime/t.template.$video.duration}})}(t,this),function(t,e){var n=t.template.$video;Object.defineProperty(e,"playing",{get:function(){return!!(0<n.currentTime&&!n.paused&&!n.ended&&2<n.readyState)}})}(t,this),function(u,t){var e=u.template,l=e.$container,f=e.$player,p=e.$video;Object.defineProperty(t,"autoSize",{get:function(){return b(l,"artplayer-auto-size")},set:function(t){if(t){var e=p.videoWidth,n=p.videoHeight,r=l.getBoundingClientRect(),i=r.width,o=r.height,a=e/n,c=i/o;if(m(l,"artplayer-auto-size"),a<c){O(f,"width","".concat(o*a/i*100,"%")),O(f,"height","100%")}else{var s=i/a/o*100;O(f,"width","100%"),O(f,"height","".concat(s,"%"))}u.emit("autoSizeChange")}else g(l,"artplayer-auto-size"),O(f,"width",null),O(f,"height",null),u.emit("autoSizeRemove")}})}(t,this),function(t,e){Object.defineProperty(e,"rect",{get:function(){return t.template.$player.getBoundingClientRect()}}),["bottom","height","left","right","top","width"].forEach(function(t){Object.defineProperty(e,t,{get:function(){return e.rect[t]}})}),Object.defineProperty(e,"x",{get:function(){return e.left+window.pageXOffset}}),Object.defineProperty(e,"y",{get:function(){return e.top+window.pageYOffset}})}(t,this),function(n,t){Object.defineProperty(t,"flip",{get:function(){return n.template.$player.dataset.flip},set:function(t){if(t){var e=["normal","horizontal","vertical"];$(e.includes(t),"'flip' only accept ".concat(e.toString()," as parameters")),n.template.$player.dataset.flip=t,n.emit("flipChange",t)}else delete n.template.$player.dataset.flip,n.emit("flipRemove")}})}(t,this),F(t,this)}function it(e,n,t,r,i,o){var a="function"==typeof r?r(e):r;if(a.disable)return{};var c=n.id,s=a.name||"".concat(o).concat(c);$(!W(n,s),"Cannot create a component that already has the same name: ".concat(o," -> ").concat(s));var u=document.createElement("div");u.classList.value="art-".concat(o," art-").concat(o,"-").concat(s),a.html&&w(u,a.html),a.style&&v(u,a.style),a.tooltip&&k(u,a.tooltip);var l=Array.from(t.children);u.dataset.index=a.index||c;var f=l.find(function(t){return Number(t.dataset.index)>=Number(u.dataset.index)});return f?f.insertAdjacentElement("beforebegin",u):w(t,u),a.click&&e.events.proxy(u,"click",function(t){t.preventDefault(),a.click.call(e,n,t),e.emit("".concat(o,":click"),u)}),a.mounted&&a.mounted(u,n,e),i&&i(u,n,e),Object.defineProperty(n,s,{value:{get id(){return c},get $ref(){return u},set show(t){t?(O(u,"display","block"),e.emit("".concat(o,":show"),u)):(O(u,"display","none"),e.emit("".concat(o,":hide"),u))},set remove(t){t&&(y(u),e.emit("".concat(o,":remove"),u))}}}),e.emit("".concat(o,":add"),a),n[s]}var ot=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ct(t){return function(a){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var e=a.events.proxy,n=a.icons,r=a.i18n,i=a.player,o=w(t,n.fullscreen);k(o,r.get("Fullscreen")),e(t,"click",function(){i.fullscreenToggle=!0}),a.on("fullscreen:enabled",function(){O(o,"opacity","0.8"),k(o,r.get("Exit fullscreen"))}),a.on("fullscreen:exit",function(){O(o,"opacity","1"),k(o,r.get("Fullscreen"))})}})}}function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ut(t){return function(a){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var e=a.events.proxy,n=a.icons,r=a.i18n,i=a.player,o=w(t,n.fullscreenWeb);k(o,r.get("Web fullscreen")),e(t,"click",function(){i.fullscreenWebToggle=!0}),a.on("fullscreenWeb:enabled",function(){O(o,"opacity","0.8"),k(o,r.get("Exit web fullscreen"))}),a.on("fullscreenWeb:exit",function(){O(o,"opacity","1"),k(o,r.get("Web fullscreen"))})}})}}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ft(t){return function(o){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var e=o.events.proxy,n=o.icons,r=o.i18n,i=o.player;k(w(t,n.pip),r.get("Mini player")),e(t,"click",function(){i.pip=!0})}})}}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dt(t){return function(u){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var e=u.events.proxy,n=u.icons,r=u.i18n,i=u.player,o=w(t,n.play),a=w(t,n.pause);function c(){O(o,"display","flex"),O(a,"display","none")}function s(){O(o,"display","none"),O(a,"display","flex")}k(o,r.get("Play")),k(a,r.get("Pause")),e(o,"click",function(){i.play=!0}),e(a,"click",function(){i.pause=!0}),i.playing?s():c(),u.on("video:playing",function(){s()}),u.on("video:pause",function(){c()})}})}}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yt(t,e){var n=t.template.$progress,r=t.player,i=n.getBoundingClientRect().left,o=N(e.pageX-i,0,n.clientWidth),a=o/n.clientWidth*r.duration;return{second:a,time:U(a),width:o,percentage:N(o/n.clientWidth,0,1)}}function vt(r){return function(l){var t=l.option,e=t.highlight,n=t.theme,f=l.events.proxy,p=l.player;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{html:'\n                <div class="art-control-progress-inner">\n                    <div class="art-progress-loaded"></div>\n                    <div class="art-progress-played" style="background: '.concat(n,'"></div>\n                    <div class="art-progress-highlight"></div>\n                    <div class="art-progress-indicator" style="background: ').concat(n,'"></div>\n                    <div class="art-progress-tip art-tip"></div>\n                </div>\n            '),mounted:function(o){var i=!1,n=d(".art-progress-loaded",o),r=d(".art-progress-played",o),a=d(".art-progress-highlight",o),c=d(".art-progress-indicator",o),s=d(".art-progress-tip",o);function u(t,e){"loaded"===t&&O(n,"width","".concat(100*e,"%")),"played"===t&&(O(r,"width","".concat(100*e,"%")),O(c,"left","calc(".concat(100*e,"% - ").concat(j(c,"width")/2,"px)")))}e.forEach(function(t){var e=N(t.time,0,p.duration)/p.duration*100;w(a,'<span data-text="'.concat(t.text,'" data-time="').concat(t.time,'" style="left: ').concat(e,'%"></span>'))}),u("loaded",p.loaded),l.on("video:progress",function(){u("loaded",p.loaded)}),l.on("video:timeupdate",function(){u("played",p.played)}),l.on("video:ended",function(){u("played",1)}),f(o,"mousemove",function(t){O(s,"display","block"),-1<t.composedPath().indexOf(a)?function(t){var e=yt(l,t).width,n=t.target.dataset.text;s.innerHTML=n;var r=s.clientWidth;e<=r/2?O(s,"left",0):e>o.clientWidth-r/2?O(s,"left","".concat(o.clientWidth-r,"px")):O(s,"left","".concat(e-r/2,"px"))}(t):function(t){var e=yt(l,t),n=e.width,r=e.time;s.innerHTML=r;var i=s.clientWidth;n<=i/2?O(s,"left",0):n>o.clientWidth-i/2?O(s,"left","".concat(o.clientWidth-i,"px")):O(s,"left","".concat(n-i/2,"px"))}(t)}),f(o,"mouseout",function(){O(s,"display","none")}),f(o,"click",function(t){if(t.target!==c){var e=yt(l,t),n=e.second;u("played",e.percentage),p.seek=n}}),f(c,"mousedown",function(){i=!0}),f(document,"mousemove",function(t){if(i){var e=yt(l,t),n=e.second,r=e.percentage;m(c,"art-show-indicator"),u("played",r),p.seek=n}}),f(document,"mouseup",function(){i&&(i=!1,g(c,"art-show-indicator"))})}})}}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gt(t){return function(a){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var e=a.events.proxy,n=a.icons,r=a.i18n,i=a.subtitle,o=w(t,n.subtitle);k(o,r.get("Hide subtitle")),e(t,"click",function(){i.toggle()}),a.on("subtitle:show",function(){O(o,"opacity","1"),k(o,r.get("Hide subtitle"))}),a.on("subtitle:hide",function(){O(o,"opacity","0.8"),k(o,r.get("Show subtitle"))})}})}}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wt(t){return function(r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(e){function n(){var t="".concat(U(r.player.currentTime)," / ").concat(U(r.player.duration));t!==e.innerHTML&&(e.innerHTML=t)}n(),["video:loadedmetadata","video:timeupdate","video:progress"].forEach(function(t){r.on(t,n)})}})}}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jt(t){return function(p){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var e=p.events.proxy,n=p.icons,r=p.player,i=p.i18n,o=!1,a=w(t,n.volume),c=w(t,n.volumeClose),s=w(t,'<div class="art-volume-panel"></div>'),u=w(s,'<div class="art-volume-slider-handle"></div>');function l(t){var e=s.getBoundingClientRect(),n=e.left,r=e.width,i=u.getBoundingClientRect().width;return N(t.pageX-n-i/2,0,r-i/2)/(r-i)}function f(t){var e=0<arguments.length&&void 0!==t?t:.7;if(r.muted||0===e)O(a,"display","none"),O(c,"display","flex"),O(u,"left","0");else{var n=((j(s,"width")||60)-j(u,"width"))*e;O(a,"display","flex"),O(c,"display","none"),O(u,"left","".concat(n,"px"))}}k(a,i.get("Mute")),O(c,"display","none"),f(r.volume),p.on("video:volumechange",function(){f(r.volume)}),e(a,"click",function(){r.muted=!0}),e(c,"click",function(){r.muted=!1}),e(s,"click",function(t){r.muted=!1,r.volume=l(t)}),e(u,"mousedown",function(){o=!0}),e(u,"mousemove",function(t){o&&(r.muted=!1,r.volume=l(t))}),e(document,"mouseup",function(){o=o&&!1})}})}}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kt(t){return function(a){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var e=a.events.proxy,n=a.icons,r=a.i18n,i=a.setting,o=w(t,n.setting);k(o,r.get("Show setting")),e(t,"click",function(){i.toggle()}),a.on("setting:show",function(){O(o,"opacity","0.8"),k(o,r.get("Hide setting"))}),a.on("setting:hide",function(){O(o,"opacity","1"),k(o,r.get("Show setting"))})}})}}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Et(t){return function(h){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(f){var p=h.option.thumbnails,d=h.template.$progress,t=h.events,e=t.proxy,n=t.loadImg,r=!1,i=!1;e(d,"mousemove",function(t){r||(r=!0,n(p.url).then(function(){i=!0})),i&&(O(f,"display","block"),function(t){var e=yt(h,t).width,n=p.url,r=p.height,i=p.width,o=p.number,a=p.column,c=d.clientWidth/o,s=Math.floor(e/c),u=Math.ceil(s/a)-1,l=s%a||a-1;O(f,"backgroundImage","url(".concat(n,")")),O(f,"height","".concat(r,"px")),O(f,"width","".concat(i,"px")),O(f,"backgroundPosition","-".concat(l*i,"px -").concat(u*r,"px")),e<=i/2?O(f,"left",0):e>d.clientWidth-i/2?O(f,"left","".concat(d.clientWidth-i,"px")):O(f,"left","".concat(e-i/2,"px"))}(t))}),e(d,"mouseout",function(){O(f,"display","none")})}})}}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $t(t){return function(a){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var e=a.events.proxy,n=a.icons,r=a.i18n,i=a.player,o=w(t,n.screenshot);k(o,r.get("Screenshot")),e(o,"click",function(){i.screenshot()})}})}}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tt(t){return function(f){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{mounted:function(t){var o=f.option.quality,e=f.events,n=e.proxy,r=e.hover,a=f.player,c=-1,i=o.find(function(t){return t.default})||o[0];c=o.indexOf(i);var s=w(t,'<div class="art-quality-name">'.concat(i.name,"</div>")),u=o.map(function(t,e){return'<div class="art-quality-item" data-index="'.concat(e,'">').concat(t.name,"</div>")}).join(""),l=w(t,'<div class="art-qualitys">'.concat(u,"</div>"));r(t,function(){l.style.left="-".concat(j(l,"width")/2-t.clientWidth/2,"px")}),n(l,"click",function(t){var e=Number(t.target.dataset.index),n=o[e],r=n.url,i=n.name;r&&i&&c!==e&&(a.switchQuality(r,i),s.innerHTML=i,c=e)})}})}}var Dt=function(){function n(t){var e=this;a(this,n),this.id=0,this.art=t,this.art.on("ready",function(){e.init()})}return i(n,[{key:"init",value:function(){var e=this,t=this.art.option;this.add(vt({name:"progress",disable:t.isLive,position:"top",index:10})),this.add(Et({name:"thumbnails",disable:!t.thumbnails.url||t.isLive,position:"top",index:20})),this.add(dt({name:"playAndPause",disable:!1,position:"left",index:10})),this.add(jt({name:"volume",disable:!1,position:"left",index:20})),this.add(wt({name:"time",disable:t.isLive,position:"left",index:30})),this.add(Tt({name:"quality",disable:0===t.quality.length,position:"right",index:10})),this.add($t({name:"screenshot",disable:!t.screenshot,position:"right",index:20})),this.add(gt({name:"subtitle",disable:!t.subtitle.url,position:"right",index:30})),this.add(kt({name:"setting",disable:!t.setting,position:"right",index:40})),this.add(ft({name:"pip",disable:!t.pip,position:"right",index:50})),this.add(ut({name:"fullscreenWeb",disable:!t.fullscreenWeb,position:"right",index:60})),this.add(ct({name:"fullscreen",disable:!t.fullscreen,position:"right",index:70})),t.controls.forEach(function(t){e.add(t)})}},{key:"add",value:function(t,e){var n,r="function"==typeof t?t(this.art):t,i=this.art.template,o=i.$progress,a=i.$controlsLeft,c=i.$controlsRight;switch(r.position){case"top":n=o;break;case"left":n=a;break;case"right":n=c}this.id+=1,$(r.position,"Controls option.position can not be empty");var s=it(this.art,this,n,r,e,"control");return r.disable||"top"===r.position||s.$ref.firstElementChild&&"I"===s.$ref.firstElementChild.tagName||m(s.$ref,"art-control-onlyText"),s}},{key:"toggle",value:function(){this.show=!this.state}},{key:"show",set:function(t){var e=this.art.template.$player;t?(this.state=!0,m(e,"artplayer-controls-show"),this.art.emit("controls:show")):(this.state=!1,g(e,"artplayer-controls-show"),this.art.emit("controls:hide"))}}]),n}();function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function At(n){return function(t){var e=t.i18n,r=t.player;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{html:"\n                ".concat(e.get("Play speed"),':\n                <span data-rate="0.5">0.5</span>\n                <span data-rate="0.75">0.75</span>\n                <span data-rate="1.0" class="normal current">').concat(e.get("Normal"),'</span>\n                <span data-rate="1.25">1.25</span>\n                <span data-rate="1.5">1.5</span>\n                <span data-rate="2.0">2.0</span>\n            '),click:function(t,e){var n=e.target.dataset.rate;n&&(r.playbackRate=Number(n),t.show=!1)},mounted:function(n){t.on("playbackRateChange",function(e){var t=h("span",n).find(function(t){return Number(t.dataset.rate)===e});t&&P(t,"current")})}})}}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Mt(n){return function(t){var e=t.i18n,r=t.player;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{html:"\n                ".concat(e.get("Aspect ratio"),':\n                <span data-ratio="default" class="default current">').concat(e.get("Default"),'</span>\n                <span data-ratio="4:3">4:3</span>\n                <span data-ratio="16:9">16:9</span>\n            '),click:function(t,e){var n=e.target.dataset.ratio;n&&(r.aspectRatio=n,t.show=!1)},mounted:function(n){t.on("aspectRatioChange",function(e){var t=h("span",n).find(function(t){return t.dataset.ratio===e});t&&P(t,"current")})}})}}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qt(t){return function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{html:e.i18n.get("Video info"),click:function(t){e.info.show=!0,t.show=!1}})}}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ft(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 3.1.18</a>'})}function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function It(e){return function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{html:t.i18n.get("Close"),click:function(t){t.show=!1}})}}var Vt=function(){function n(t){var e=this;a(this,n),this.id=0,this.art=t,this.art.on("ready",function(){e.init()}),this.art.on("blur",function(){e.show=!1})}return i(n,[{key:"init",value:function(){var e=this,t=this.art,n=t.option,r=t.template,i=r.$player,o=r.$contextmenu,a=t.events.proxy;this.add(At({disable:!n.playbackRate,name:"playbackRate",index:10})),this.add(Mt({disable:!n.aspectRatio,name:"aspectRatio",index:20})),this.add(qt({disable:!1,name:"info",index:30})),this.add(Ft({disable:!1,name:"version",index:40})),this.add(It({disable:!1,name:"close",index:50})),n.contextmenu.forEach(function(t){e.add(t)}),a(i,"contextmenu",function(t){t.preventDefault(),e.show=!0,e.setPos(t)}),a(i,"click",function(t){t.composedPath().includes(o)||(e.show=!1)})}},{key:"add",value:function(t,e){var n=this.art.template.$contextmenu;return this.id+=1,it(this.art,this,n,t,e,"contextmenu")}},{key:"setPos",value:function(t){var e=this.art.template,n=e.$player,r=e.$contextmenu,i=t.clientX,o=t.clientY,a=n.getBoundingClientRect(),c=a.height,s=a.width,u=a.left,l=a.top,f=r.getBoundingClientRect(),p=f.height,d=f.width,h=i-u,y=o-l;u+s<i+d&&(h=s-d),l+c<o+p&&(y=c-p),O(r,"left","".concat(h,"px")),O(r,"top","".concat(y,"px"))}},{key:"toggle",value:function(){this.show=!this.state}},{key:"show",set:function(t){var e=this.art.template.$player;t?(this.state=!0,m(e,"artplayer-contextmenu-show"),this.art.emit("contextmenu:show")):(this.state=!1,g(e,"artplayer-contextmenu-show"),this.art.emit("contextmenu:hide"))}}]),n}(),Bt=function(){function e(t){a(this,e),this.art=t,this.init()}return i(e,[{key:"init",value:function(){var t=this,e=this.art,n=e.template.$infoClose;(0,e.events.proxy)(n,"click",function(){t.show=!1}),this.art.on("destroy",function(){t.timer&&clearTimeout(t.timer)})}},{key:"creatInfo",value:function(){var t=[];return t.push('\n          <div class="art-info-item ">\n            <div class="art-info-title">Player version:</div>\n            <div class="art-info-content">3.1.18</div>\n          </div>\n        '),t.push('\n          <div class="art-info-item">\n            <div class="art-info-title">Video url:</div>\n            <div class="art-info-content">'.concat(this.art.option.url,"</div>\n          </div>\n        ")),t.push('\n          <div class="art-info-item">\n            <div class="art-info-title">Video volume:</div>\n            <div class="art-info-content" data-video="volume"></div>\n          </div>\n        '),t.push('\n          <div class="art-info-item">\n            <div class="art-info-title">Video time:</div>\n            <div class="art-info-content" data-video="currentTime"></div>\n          </div>\n        '),t.push('\n          <div class="art-info-item">\n            <div class="art-info-title">Video duration:</div>\n            <div class="art-info-content" data-video="duration"></div>\n          </div>\n        '),t.push('\n          <div class="art-info-item">\n            <div class="art-info-title">Video resolution:</div>\n            <div class="art-info-content">\n              <span data-video="videoWidth"></span> x <span data-video="videoHeight"></span>\n            </div>\n          </div>\n        '),t.join("")}},{key:"readInfo",value:function(){var t=this.art.template,e=t.$infoPanel,n=t.$video;h("[data-video]",e).forEach(function(t){var e=n[t.dataset.video];t.innerHTML=void 0!==e?"number"==typeof e?e.toFixed(2):e:"unknown"})}},{key:"loop",value:function(){var t=this;this.readInfo(),this.timer=setTimeout(function(){t.readInfo(),t.loop()},1e3)}},{key:"toggle",value:function(){this.show=!this.state}},{key:"show",set:function(t){var e=this.art.template,n=e.$player,r=e.$infoPanel;t?(this.state=!0,m(n,"artplayer-info-show"),r.innerHTML||w(r,this.creatInfo()),clearTimeout(this.timer),this.loop(),this.art.emit("info:show")):(this.state=!1,g(n,"artplayer-info-show"),clearTimeout(this.timer),this.art.emit("info:hide"))}}]),e}();var Nt=function(t){if(Array.isArray(t))return t};var Ut=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}};var _t=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var Xt=function(t,e){return Nt(t)||Ut(t,e)||_t()},Yt=function(){function n(t){a(this,n),this.art=t,this.state=!0,this.isInit=!1;var e=this.art.option.subtitle.url;e&&this.init(e)}return i(n,[{key:"switch",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:"unknown",r=this.art,i=r.i18n,o=r.notice;return this.init(t).then(function(t){return o.show("".concat(i.get("Switch subtitle"),": ").concat(n)),t})}},{key:"init",value:function(u){var l=this;return new Promise(function(o){var t=l.art,a=t.events.proxy,e=t.option.subtitle,n=t.template,c=n.$video,s=n.$subtitle,r=n.$track;if(v(s,e.style||{}),!r){var i=document.createElement("track");i.default=!0,i.kind="metadata",c.appendChild(i),l.art.template.$track=i}l.load(u).then(function(t){s.innerHTML="";var e=l.art.template.$track,n=e.src;if(n!==t){if(URL.revokeObjectURL(n),e.src=t,c.textTracks&&c.textTracks[0]){var r=function(){var t=Xt(i.activeCues,1)[0];s.innerHTML="",t&&(s.innerHTML=t.text.split(/\r?\n/).map(function(t){return"<p>".concat(t,"</p>")}).join("")),this.art.emit("subtitle:update",s)},i=Xt(c.textTracks,1)[0];l.isInit||(l.isInit=!0,a(i,"cuechange",r.bind(l))),l.art.on("artplayerPluginSubtitleOffset",r.bind(l))}o(t)}})})}},{key:"load",value:function(e){var n=this.art.notice;return fetch(e).then(function(t){return t.text()}).then(function(t){switch(C(e)){case"srt":return T(R(t));case"ass":return T(D(t));case"vtt":return T(t);default:return e}}).catch(function(t){throw n.show(t),t})}},{key:"toggle",value:function(){this.show=!this.state}},{key:"url",get:function(){var t=this.art.template.$track;return t?t.src:""}},{key:"show",set:function(t){var e=this.art.template.$player;t?(this.state=!0,g(e,"artplayer-subtitle-hide"),this.art.emit("subtitle:show")):(this.state=!1,m(e,"artplayer-subtitle-hide"),this.art.emit("subtitle:hide"))}}]),n}();function Zt(t){var n=this;a(this,Zt);var r=Object.assign({loading:'<svg xmlns="http://www.w3.org/2000/svg" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default">\n  <rect x="0" y="0" width="100" height="100" fill="none" class="bk"/>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(0 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(30 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(60 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(90 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(120 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(150 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(180 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(210 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(240 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(270 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(300 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/>\n  </rect>\n  <rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(330 50 50) translate(0 -30)">\n    <animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/>\n  </rect>\n</svg>',state:'<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" style="filter: drop-shadow(0px 1px 1px black);" viewBox="0 0 24 24">\n    <path d="M20,2H4C1.8,2,0,3.8,0,6v12c0,2.2,1.8,4,4,4h16c2.2,0,4-1.8,4-4V6C24,3.8,22.2,2,20,2z M15.6,12.8L10.5,16 C9.9,16.5,9,16,9,15.2V8.8C9,8,9.9,7.5,10.5,8l5.1,3.2C16.3,11.5,16.3,12.5,15.6,12.8z"/>\n</svg>',play:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n  <path d="M17.982 9.275L8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"></path>\n</svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n    <path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zM15 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"></path>\n</svg>',volume:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n    <path d="M10.188 4.65L6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zM14.446 3.778a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"></path>\n    <path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"></path>\n</svg>',volumeClose:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n    <path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"></path>\n    <path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zM18.778 18.778l-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"></path>\n</svg>',subtitle:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 48 48">\n    <path d="M0 0h48v48H0z" fill="none"/>\n    <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"/>\n</svg>',screenshot:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50">\n\t<path d="M 19.402344 6 C 17.019531 6 14.96875 7.679688 14.5 10.011719 L 14.097656 12 L 9 12 C 6.238281 12 4 14.238281 4 17 L 4 38 C 4 40.761719 6.238281 43 9 43 L 41 43 C 43.761719 43 46 40.761719 46 38 L 46 17 C 46 14.238281 43.761719 12 41 12 L 35.902344 12 L 35.5 10.011719 C 35.03125 7.679688 32.980469 6 30.597656 6 Z M 25 17 C 30.519531 17 35 21.480469 35 27 C 35 32.519531 30.519531 37 25 37 C 19.480469 37 15 32.519531 15 27 C 15 21.480469 19.480469 17 25 17 Z M 25 19 C 20.589844 19 17 22.589844 17 27 C 17 31.410156 20.589844 35 25 35 C 29.410156 35 33 31.410156 33 27 C 33 22.589844 29.410156 19 25 19 Z "/>\n</svg>\n',setting:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22">\n    <circle cx="11" cy="11" r="2"></circle>\n    <path d="M19.164 8.861L17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"></path>\n</svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36">\n\t<path d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path>\n\t<path d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path>\n\t<path d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path>\n\t<path d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path>\n</svg>',fullscreenWeb:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="36" width="36">\n\t<path d="m 28,11 0,14 -20,0 0,-14 z m -18,2 16,0 0,10 -16,0 0,-10 z" fill-rule="evenodd"></path>\n</svg>',pip:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32">\n    <path d="M25,17 L17,17 L17,23 L25,23 L25,17 L25,17 Z M29,25 L29,10.98 C29,9.88 28.1,9 27,9 L9,9 C7.9,9 7,9.88 7,10.98 L7,25 C7,26.1 7.9,27 9,27 L27,27 C28.1,27 29,26.1 29,25 L29,25 Z M27,25.02 L9,25.02 L9,10.97 L27,10.97 L27,25.02 L27,25.02 Z"></path>\n</svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36">\n    <path d="m 12,12 h 2 v 12 h -2 z m 3.5,6 8.5,6 V 12 z"></path>\n</svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36">\n    <path d="M 12,24 20.5,18 12,12 V 24 z M 22,12 v 12 h 2 V 12 h -2 z"></path>\n</svg>'},t.option.icons);Object.keys(r).forEach(function(t){var e=document.createElement("i");e.classList.add("art-icon"),e.classList.add("art-icon-".concat(t)),w(e,r[t]),n[t]=e})}var Jt=function(){function n(t){var e=this;a(this,n),this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),this.loadImg=this.loadImg.bind(this),t.whitelist.state&&t.once("video:canplay",function(){!function(e,t){var n=e.template.$player;t.proxy(document,["click","contextmenu"],function(t){-1<t.composedPath().indexOf(n)?(e.isFocus=!0,e.emit("focus")):(e.isFocus=!1,e.emit("blur"))})}(t,e),function(t,e){var n=t.template.$player;e.hover(n,function(){m(n,"artplayer-hover"),t.emit("hoverenter")},function(){g(n,"artplayer-hover"),t.emit("hoverleave")})}(t,e),function(e,t){var n=e.template,r=n.$player,i=n.$video,o=e.player,a=V(function(){m(r,"artplayer-hide-cursor"),g(r,"artplayer-hover"),e.controls.show=!1},3e3);e.on("hoverleave",function(){o.playing&&a()}),t.proxy(r,"mousemove",function(t){a.clearTimeout(),g(r,"artplayer-hide-cursor"),e.controls.show=!0,!e.player.pip&&o.playing&&t.target===i&&a()})}(t,e),function(t,e){var n=t.option,r=t.player,i=t.template.$player,o=document.createElement("object");o.setAttribute("aria-hidden","true"),o.setAttribute("tabindex",-1),o.type="text/html",o.data="about:blank";var a=r.width,c=r.height,s=B(function(){r.width===a&&r.height===c||(a=r.width,c=r.height,n.autoSize&&(t.player.fullscreen||t.player.fullscreenWeb||t.player.pip?t.player.autoSize=!1:t.player.autoSize=!0),t.player.aspectRatioReset=!0,t.emit("resize",{width:r.width,height:r.height}))},500);e.proxy(o,"load",function(){e.proxy(o.contentDocument.defaultView,"resize",s)}),i.appendChild(o)}(t,e)})}return i(n,[{key:"proxy",value:function(e,t,n,r){var i=this,o=3<arguments.length&&void 0!==r?r:{};Array.isArray(t)?t.forEach(function(t){return i.proxy(e,t,n,o)}):(e.addEventListener(t,n,o),this.destroyEvents.push(function(){e.removeEventListener(t,n,o)}))}},{key:"hover",value:function(t,e,n){e&&this.proxy(t,"mouseenter",e),n&&this.proxy(t,"mouseleave",n)}},{key:"loadImg",value:function(r){var i=this;return new Promise(function(t,e){var n;if(r instanceof HTMLImageElement)n=r;else{if("string"!=typeof r)return e(r);(n=new Image).src=r}return n.complete?t(n):(i.proxy(n,"load",function(){return t(n)}),i.proxy(n,"error",function(){return e(n)}),r)})}},{key:"destroy",value:function(){this.destroyEvents.forEach(function(t){return t()})}}]),n}(),Gt=function(){function n(t){var e=this;a(this,n),this.art=t,this.keys={},this.art.option.hotkey&&this.art.on("ready",function(){e.add(27,function(){t.player.fullscreenWeb&&(t.player.fullscreenWeb=!1)}),e.add(32,function(){t.player.toggle=!0}),e.add(37,function(){t.player.seek=t.player.currentTime-5}),e.add(38,function(){t.player.volume+=.1}),e.add(39,function(){t.player.seek=t.player.currentTime+5}),e.add(40,function(){t.player.volume-=.1}),e.init()})}return i(n,[{key:"add",value:function(t,e){this.keys[t]?this.keys[t].push(e):this.keys[t]=[e]}},{key:"init",value:function(){var i=this;(0,this.art.events.proxy)(window,"keydown",function(t){if(i.art.isFocus){var e=document.activeElement.tagName.toUpperCase(),n=document.activeElement.getAttribute("contenteditable");if("INPUT"!==e&&"TEXTAREA"!==e&&""!==n&&"true"!==n){var r=i.keys[t.keyCode];r&&(t.preventDefault(),r.forEach(function(t){return t()}),i.art.emit("hotkey",t))}}})}}]),n}(),Qt=function(){function n(t){var e=this;a(this,n),this.id=0,this.art=t,this.add=this.add.bind(this),this.art.on("ready",function(){e.art.option.layers.forEach(function(t){e.add(t)})})}return i(n,[{key:"add",value:function(t,e){this.id+=1;var n=this.art.template.$layers;return it(this.art,this,n,t,e,"layer")}},{key:"toggle",value:function(){this.show=!this.state}},{key:"show",set:function(t){var e=this.art.template.$player;t?(this.state=!0,g(e,"artplayer-layers-hide"),this.art.emit("layers:show")):(this.state=!1,m(e,"artplayer-layers-hide"),this.art.emit("layers:hide"))}}]),n}(),Kt=function(){function e(t){a(this,e),w((this.art=t).template.$loading,t.icons.loading)}return i(e,[{key:"toggle",value:function(){this.show=!this.state}},{key:"show",set:function(t){var e=this.art.template.$player;t?(this.state=!0,m(e,"artplayer-loading-show"),this.art.emit("loading:show")):(this.state=!1,g(e,"artplayer-loading-show"),this.art.emit("loading:hide"))}}]),e}(),te=function(){function e(t){a(this,e),this.art=t,this.timer=null}return i(e,[{key:"show",value:function(t,e,n){var r=this,i=!(1<arguments.length&&void 0!==e)||e,o=2<arguments.length&&void 0!==n?n:1e3,a=this.art.template,c=a.$player,s=a.$noticeInner;this.state=!0,m(c,"artplayer-notice-show"),s.innerHTML=t instanceof Error?t.message.trim():t,clearTimeout(this.timer),i&&(this.timer=setTimeout(function(){r.hide()},o)),this.art.emit("notice:show")}},{key:"hide",value:function(){var t=this.art.template.$player;this.state=!1,g(t,"artplayer-notice-show"),this.art.emit("notice:hide")}}]),e}(),ee=function(){function n(t){a(this,n);var e=w((this.art=t).template.$mask,'<div class="art-state"></div>');w(e,t.icons.state)}return i(n,[{key:"toggle",value:function(){this.show=!this.state}},{key:"show",set:function(t){var e=this.art.template.$player;t?(this.state=!0,m(e,"artplayer-mask-show"),this.art.emit("mask:show")):(this.state=!1,g(e,"artplayer-mask-show"),this.art.emit("mask:hide"))}}]),n}();function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function re(n){return function(t){var e=t.i18n,r=t.player;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{html:'\n                <div class="art-setting-header">'.concat(e.get("Flip"),'</div>\n                <div class="art-setting-radio">\n                    <div class="art-radio-item current">\n                        <button type="button" data-value="normal">').concat(e.get("Normal"),'</button>\n                    </div>\n                    <div class="art-radio-item">\n                        <button type="button" data-value="horizontal">').concat(e.get("Horizontal"),'</button>\n                    </div>\n                    <div class="art-radio-item">\n                        <button type="button" data-value="vertical">').concat(e.get("Vertical"),"</button>\n                    </div>\n                </div>\n            "),click:function(t,e){var n=e.target.dataset.value;n&&(r.flip=n)},mounted:function(n){t.on("flipChange",function(e){var t=h("button",n).find(function(t){return t.dataset.value===e});t&&P(t.parentElement,"current")})}})}}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oe(n){return function(t){var e=t.i18n,r=t.player;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{html:'\n                <div class="art-setting-header">'.concat(e.get("Aspect ratio"),'</div>\n                <div class="art-setting-radio">\n                    <div class="art-radio-item current">\n                        <button type="button" data-value="default">').concat(e.get("Default"),'</button>\n                    </div>\n                    <div class="art-radio-item">\n                        <button type="button" data-value="4:3">4:3</button>\n                    </div>\n                    <div class="art-radio-item">\n                        <button type="button" data-value="16:9">16:9</button>\n                    </div>\n                </div>\n            '),click:function(t,e){var n=e.target.dataset.value;n&&(r.aspectRatio=n)},mounted:function(n){t.on("aspectRatioChange",function(e){var t=h("button",n).find(function(t){return t.dataset.value===e});t&&P(t.parentElement,"current")})}})}}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ce(e){return function(r){var t=r.i18n,i=r.player,o=r.events.proxy;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{html:'\n                <div class="art-setting-header">\n                    '.concat(t.get("Play speed"),': <span class="art-subtitle-value">1.0</span>x\n                </div>\n                <div class="art-setting-range">\n                    <input class="art-subtitle-range" value="1" type="range" min="0.5" max="2" step="0.25">\n                </div>\n            '),mounted:function(t){var e=d(".art-setting-range input",t),n=d(".art-subtitle-value",t);o(e,"change",function(){var t=e.value;n.innerText=t,i.playbackRate=Number(t)}),r.on("playbackRateChange",function(t){e.value!==t&&(e.value=t,n.innerText=t)})}})}}var se=function(){function n(t){var e=this;a(this,n),this.id=0,this.art=t,this.state=!1,t.option.setting&&(this.art.on("ready",function(){e.init()}),this.art.on("blur",function(){e.show=!1}))}return i(n,[{key:"init",value:function(){var e=this,t=this.art,n=t.option,r=t.template.$setting;(0,t.events.proxy)(r,"click",function(t){t.target===r&&(e.show=!1)}),this.add(re({disable:!n.flip,name:"flip"})),this.add(oe({disable:!n.aspectRatio,name:"aspectRatio"})),this.add(ce({disable:!n.playbackRate,name:"playbackRate"}))}},{key:"add",value:function(t,e){this.id+=1;var n=this.art.template.$settingBody;return it(this.art,this,n,t,e,"setting")}},{key:"toggle",value:function(){this.show=!this.state}},{key:"show",set:function(t){var e=this.art.template.$player;t?(this.state=!0,m(e,"artplayer-setting-show"),this.art.emit("setting:show")):(this.state=!1,g(e,"artplayer-setting-show"),this.art.emit("setting:hide"))}}]),n}(),ue=function(){function e(t){a(this,e),this.art=t,this.name="artplayer_settings",this.init()}return i(e,[{key:"init",value:function(){var t=this.art.option,e=this.get("volume");e&&(t.volume=e)}},{key:"get",value:function(t){var e=JSON.parse(window.localStorage.getItem(this.name))||{};return t?e[t]:{}}},{key:"set",value:function(t,e){var n=Object.assign({},this.get(),ot({},t,e));window.localStorage.setItem(this.name,JSON.stringify(n))}},{key:"del",value:function(t){var e=this.get();delete e[t],window.localStorage.setItem(this.name,JSON.stringify(e))}},{key:"clean",value:function(){window.localStorage.removeItem(this.name)}}]),e}();function le(r){var t=r.i18n,i=r.events.proxy;return{title:"Subtitle",name:"subtitle",index:20,html:'\n            <div class="art-setting-header">\n                '.concat(t.get("Subtitle offset time"),': <span class="art-subtitle-value">0</span>s\n            </div>\n            <div class="art-setting-range">\n                <input class="art-subtitle-range" value="0" type="range" min="-5" max="5" step="0.5">\n            </div>\n        '),mounted:function(t){var e=d(".art-setting-range input",t),n=d(".art-subtitle-value",t);i(e,"change",function(){var t=e.value;n.innerText=t,r.plugins.subtitleOffset.offset(Number(t))}),r.on("subtitle:switch",function(){e.value=0,n.innerText=0}),r.on("artplayerPluginSubtitleOffset",function(t){e.value!==t&&(e.value=t,n.innerText=t)})}}}function fe(r){var i=r.constructor.utils.clamp,t=r.setting,o=r.notice,a=r.template,c=r.i18n,s=r.player;c.update({"zh-cn":{"Subtitle offset time":"字幕偏移时间","No subtitles found":"未发现字幕"},"zh-tw":{"Subtitle offset time":"字幕偏移時間","No subtitles found":"未發現字幕"}}),t.add(le);var u=[];return r.on("subtitle:switch",function(){u=[]}),{name:"subtitleOffset",offset:function(t){if(a.$track&&a.$track.track){var e=Array.from(a.$track.track.cues),n=i(t,-5,5);e.forEach(function(t,e){u[e]||(u[e]={startTime:t.startTime,endTime:t.endTime}),t.startTime=i(u[e].startTime+n,0,s.duration),t.endTime=i(u[e].endTime+n,0,s.duration)}),o.show("".concat(c.get("Subtitle offset time"),": ").concat(t,"s")),r.emit("artplayerPluginSubtitleOffset",t)}else o.show("".concat(c.get("No subtitles found"))),r.emit("artplayerPluginSubtitleOffset",0)}}}function pe(t){var n=t.events.proxy,o=t.notice,a=t.i18n,c=t.template,s=t.player,u="Playback of this file format is not supported";function r(t){if(t){var e=C(t.name),n=c.$video.canPlayType(t.type);if("maybe"===n||"probably"===n){var r=URL.createObjectURL(t);s.switchUrl(r,t.name)}else{var i="".concat(a.get(u),": ").concat(t.type||e);o.show(i,!0,3e3),$(!1,i)}}}return a.update({"zh-cn":ot({},u,"不支持播放该文件格式"),"zh-tw":ot({},u,"不支持播放該文件格式")}),n(c.$player,"dragover",function(t){t.preventDefault()}),n(c.$player,"drop",function(t){t.preventDefault(),r(t.dataTransfer.files[0])}),{name:"localVideo",attach:function(t){var e=w(t,'<input type="file">');O(t,"position","relative"),v(e,{position:"absolute",width:"100%",height:"100%",left:"0",top:"0",opacity:"0"}),n(e,"change",function(){r(e.files[0])})}}}function de(t){var n=t.events.proxy,r=t.notice,i=t.i18n,c=t.subtitle,s="Only supports subtitle files in .ass, .vtt and .srt format";return i.update({"zh-cn":ot({},s,"只支持 .ass、.vtt 和 .srt 格式的字幕文件"),"zh-tw":ot({},s,"只支持 .ass、.vtt 和 .srt 格式的字幕文件")}),{name:"localSubtitle",attach:function(t){var e=w(t,'<input type="file">');O(t,"position","relative"),v(e,{position:"absolute",width:"100%",height:"100%",left:"0",top:"0",opacity:"0"}),n(e,"change",function(){!function(o){if(o){var a=C(o.name);if(["ass","vtt","srt"].includes(a)){var t=new FileReader;n(t,"load",function(t){var e=t.target.result;switch(a){case"srt":var n=T(R(e));c.switch(n,o.name);break;case"ass":var r=T(D(e));c.switch(r,o.name);break;case"vtt":var i=T(e);c.switch(i,o.name)}}),t.readAsText(o)}else{var e=i.get(s);r.show(e,!0,3e3),$(!1,e)}}}(e.files[0])})}}}function he(e){var t=e.layers,n=e.player,r=e.option.theme;return t.add({name:"miniProgressBar",style:{display:"none",position:"absolute",left:0,right:0,bottom:0,height:"2px",background:r},mounted:function(t){e.on("controls:show",function(){t.style.display="none"}),e.on("destroy",function(){t.style.display="none"}),e.on("controls:hide",function(){t.style.display="block"}),e.on("video:timeupdate",function(){t.style.width="".concat(100*n.played,"%")})}}),{name:"miniProgressBar"}}function ye(r){var i=1e4,o=0,a=0,c=0,t=null;function e(){c=a=o=0,cancelAnimationFrame(t),t=null}function n(){t||!function n(){r.isDestroy||(t=requestAnimationFrame(function(){var t=Date.now();if(c){var e=t-c;a+=e,r.player.playing||(o+=e)}c=t,r.emit("networkMonitor",o/a),i<=a&&(a=o=0),n()}))}()}return r.on("play",n),r.on("pause",e),{name:"networkMonitor",reset:e,start:n,sample:function(t){i=t}}}function ve(e){var t=e.events,n=e.player,r=e.template,i=V(function(){var t=r.$player.getBoundingClientRect();t.top+t.height<=0&&!n.pip?(n.pip=!0,e.emit("artplayerPluginAutoPip",!0)):n.pip&&(n.pip=!1,e.emit("artplayerPluginAutoPip",!1))},300);return t.proxy(window,"scroll",i),{name:"autoPip"}}function me(e){a(this,me);var n=e.option,r=e.events.proxy,i=e.template.$video;J.video.events.forEach(function(t){r(i,t,function(t){e.emit("video:".concat(t.type),t)})}),Object.keys(n.moreVideoAttr).forEach(function(t){i[t]=n.moreVideoAttr[t]}),n.muted&&(i.muted=n.muted),n.volume&&(i.volume=N(n.volume,0,1)),n.poster&&(i.poster=n.poster),n.autoplay&&(i.autoplay=n.autoplay),i.controls=!0;var t=n.type||C(n.url),o=n.customType[t];t&&o?(e.emit("beforeCustomType",t),o(i,n.url,e),e.emit("afterCustomType",t)):(e.emit("beforeAttachUrl",n.url),i.src=n.url,e.emit("afterAttachUrl",i.src))}var ge=function(){function r(t){var e=this;a(this,r),this.art=t,this.id=0;var n=t.option;n.subtitle.url&&n.subtitleOffset&&this.add(fe),!n.isLive&&n.miniProgressBar&&this.add(he),n.localVideo&&this.add(pe),n.localSubtitle&&this.add(de),n.networkMonitor&&this.add(ye),n.autoPip&&this.add(ve),t.option.plugins.forEach(function(t){e.add(t)})}return i(r,[{key:"add",value:function(t){this.id+=1;var e=t.call(this,this.art),n="";return $(!W(this,n=e&&e.name?e.name:t.name?t.name:"plugin".concat(this.id)),"Cannot add a plugin that already has the same name: ".concat(n)),Object.defineProperty(this,n,{value:e}),this.art.emit("plugin:add",t),this}}]),r}(),be=0,we=function(){function n(t){var e;return a(this,n),(e=s(this,u(n).call(this))).option=f(H(n.option,t),Z),e.isFocus=!1,e.isDestroy=!1,e.whitelist=new Y(o(e)),e.template=new G(o(e)),e.events=new Jt(o(e)),e.whitelist.state?(e.storage=new ue(o(e)),e.icons=new Zt(o(e)),e.i18n=new tt(o(e)),e.notice=new te(o(e)),e.player=new rt(o(e)),e.layers=new Qt(o(e)),e.controls=new Dt(o(e)),e.contextmenu=new Vt(o(e)),e.subtitle=new Yt(o(e)),e.info=new Bt(o(e)),e.loading=new Kt(o(e)),e.hotkey=new Gt(o(e)),e.mask=new ee(o(e)),e.setting=new se(o(e)),e.plugins=new ge(o(e))):e.mobile=new me(o(e)),be+=1,e.id=be,n.instances.push(o(e)),console.log("%c ArtPlayer %c 3.1.18 %c https://artplayer.org","color: #fff; background: #5f5f5f","color: #fff; background: #4bc729",""),e}return e(n,p),i(n,[{key:"destroy",value:function(t){var e=0<arguments.length&&void 0!==t&&t;this.events.destroy(),this.template.destroy(e),n.instances.splice(n.instances.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}],[{key:"version",get:function(){return"3.1.18"}},{key:"env",get:function(){return'"production"'}},{key:"config",get:function(){return J}},{key:"utils",get:function(){return _}},{key:"scheme",get:function(){return Z}},{key:"Emitter",get:function(){return p}},{key:"validator",get:function(){return f}},{key:"kindOf",get:function(){return f.kindOf}},{key:"option",get:function(){return{container:"#artplayer",url:"",poster:"",title:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,localVideo:!1,localSubtitle:!1,autoPip:!1,networkMonitor:!1,layers:[],contextmenu:[],quality:[],controls:[],highlight:[],plugins:[],whitelist:[],thumbnails:{url:"",number:60,width:160,height:90,column:10},subtitle:{url:"",style:{}},moreVideoAttr:{controls:!1,preload:"metadata"},icons:{},customType:{},lang:navigator.language.toLowerCase()}}}]),n}();return Object.defineProperty(we,"instances",{value:[]}),we});
